(window["webpackJsonp_user"]=window["webpackJsonp_user"]||[]).push([["chunk-4c99f002"],{"14ff":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-container"},[a("page-header",{attrs:{title:"站内消息",titleIcon:"icon-message-code"}}),a("div",{staticClass:"list-tabs pad-lr-default"},[a("efly-tabs",{attrs:{value:t.tabs,type:"card"},on:{change:function(e){return t.changeTabs(e)}}},[a("efly-tabs-pane",{attrs:{value:"all"}},[t._v("全部")]),a("efly-tabs-pane",{attrs:{value:"0"}},[t._v("未读")]),a("efly-tabs-pane",{attrs:{value:"1"}},[t._v("已读")])],1)],1),a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-box"},[a("div",{staticClass:"list-serach"},[a("div",{staticClass:"list-serach-left"},[a("efly-button-group",t._l(t.list.type,(function(e,s){return a("efly-button",{class:{"btn-primary":t.type.type===e.type},attrs:{size:"small"},on:{click:function(a){return t.selectOption(e,"type")}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)]),a("div",{staticClass:"list-serach"},[a("div",{staticClass:"list-serach-left"}),a("div",{staticClass:"list-serach-right"},[a("select-time",{staticClass:"mar-l-mini",attrs:{label:"操作时间",startTimeID:"destory-time-start-true",endTimeID:"destory-time-end-true",startTime:t.startTime,endTime:t.endTime},on:{change:function(e){return t.selectTimeChange(e)}}}),a("efly-screen",{staticClass:"mar-l-mini"},[a("div",{attrs:{slot:"label"},slot:"label"},[a("efly-select",{attrs:{size:"small",width:"100px",type:"screen",value:"关键词",height:"auto"},on:{change:function(e){return t.labelChange(e)}}})],1),t._t("default",(function(){return[a("efly-input",{attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})]}))],2),a("efly-button",{staticClass:"btn-primary mar-l-xs",attrs:{size:"small"},on:{click:function(e){return t.getList()}}},[t._v("搜索 ")]),a("efly-button",{staticClass:"btn-solid-primary mar-l-xs",attrs:{size:"small"},on:{click:function(e){return t.clearScreen()}}},[t._v("清除 ")])],1)]),a("div",{staticClass:"list-data"},[a("efly-table",{attrs:{data:t.list.data,status:t.status.data,loadingImg:t.$loadingImg,nodataIcon:"icon-nodata"}},[a("efly-table-column",{attrs:{header:"",width:"10"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"box flex-column"},[a("efly-checkbox",{staticClass:"flex-align-center",staticStyle:{position:"relative",top:"3px"},attrs:{active:e.data.active},on:{click:function(a){return t.selectCheckbox(e.row)}}})],1)}}])}),a("efly-table-column",{attrs:{header:"标题",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"box text-align-left"},[a("span",{staticClass:"point mar-r-mini",class:{"color-bg-primary":0===e.data.isRead}}),a("span",{staticClass:"pointer",on:{click:function(a){return t.skip("detail",e.data)}}},[t._v(t._s(e.data.title))])])}}])}),a("efly-table-column",{attrs:{header:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[t._v(" "+t._s(t._f("messageType")(e.data.type))+" ")])}}])}),a("efly-table-column",{attrs:{prop:"createTime",header:"时间",width:"100"}})],1)],1),a("div",{staticClass:"list-footer"},[a("div",{staticClass:"list-footer-left"},[a("efly-checkbox",{attrs:{active:t.checkall},on:{click:function(e){return t.selectCheckAll("checkall")}}},[t._v("全选/反选")]),a("efly-button",{staticClass:"btn-solid-primary",attrs:{size:"mini",disabled:!t.status.haveSelect},on:{click:function(e){return t.markRead()}}},[t._v("标记已读 ")])],1),a("div",{staticClass:"list-footer-right"},[a("efly-page",{attrs:{size:"small",list:[5,10,20,50],count:"10",total:t.page.total,count:t.page.length},on:{change:function(e){return t.changePage(e)}}})],1)])])]),a("easy-operate",{attrs:{prop:t.easyOperate.id,show:t.component.easyOperate,data:t.easyOperate.data,title:t.easyOperate.title,icon:t.easyOperate.icon,areaWidth:"400px",scene:"confirm",confirm:t.easyOperate.confirm,cancel:t.easyOperate.cancel},on:{confirm:function(e){return t.easyOperateConfirm(e)},cancel:function(e){return t.easyOperateCancel(e)}}})],1)},i=[],l=a("5530"),r=a("d4ec"),n=a("bee2"),c=a("262e"),o=a("2caf"),u=a("9ab4"),d=a("1b40"),h=a("65a1"),b=a("bd30"),f=a("30a2"),p=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.tabs="all",t.type={label:"全部类型消息",type:""},t.title="",t.checkall=!1,t.startTime="",t.endTime="",t.page={total:0,start:0,length:10},t.list={type:[{label:"全部类型消息",type:""},{label:"销毁提醒",type:"destroy"},{label:"到期提醒",type:"expire"},{label:"操作提醒",type:"opt"},{label:"财务消息",type:"balanceLess"},{label:"安全消息",type:"security"}]},t.status={data:"loading",haveSelect:!1},t.component={easyOperate:!1},t.easyOperate={id:"create",data:[{type:"info",color:"",value:"您确定要标记选中的20条消息为已读吗？"}],icon:"",title:"标志消息",confirm:"确定",cancel:"取消"},t}return Object(n["a"])(a,[{key:"mounted",value:function(){}},{key:"created",value:function(){this.userID=b["a"].getUserID(),this.getList()}},{key:"selectTimeChange",value:function(t){this.startTime=t.startTime,this.endTime=t.endTime}},{key:"changeTabs",value:function(t){this.tabs=t,this.getList()}},{key:"selectOption",value:function(t,e){this[e]=t,this.getList()}},{key:"getList",value:function(){var t=this,e={userID:this.userID,type:this.type.type,isRead:"all"===this.tabs?"":this.tabs,title:this.title,createTimeStart:this.startTime,createTimeEnd:this.endTime,limitStart:this.page.start,limitCount:this.page.length};this.status.data="loading",h["a"].request("/message/query",e).then((function(e){for(var a in t.checkall=!1,t.status.haveSelect=!1,e.data.list)e.data.list[a]["active"]=!1;t.list.data=e.data.list,t.page.total=e.data.count,t.status.data=0===e.data.count?"nodata":"havedata"})).catch((function(e){t.status.data="error"}))}},{key:"clearScreen",value:function(){this.title="",this.startTime="",this.endTime="",this.getList()}},{key:"changePage",value:function(t){this.page.length=t.length,this.page.start=t.start,this.getList()}},{key:"selectCheckbox",value:function(t){this.list.data[t].active=!this.list.data[t].active,this.checkAllSelect(),this.$forceUpdate()}},{key:"checkAllSelect",value:function(){var t=!0,e=!1;for(var a in this.list.data)this.list.data[a].active?e=!0:t=!1;this.checkall=t,this.status.haveSelect=e}},{key:"selectCheckAll",value:function(){for(var t in this.checkall=!this.checkall,this.status.haveSelect=this.checkall,this.list.data)this.list.data[t].active=this.checkall}},{key:"markRead",value:function(){var t=0;for(var e in this.list.data)this.list.data[e].active&&t++;this.easyOperate.data=[{type:"info",color:"",value:"您确定要标记选中的"+t+"条消息为已读吗？"}],this.component.easyOperate=!0}},{key:"easyOperateConfirm",value:function(){var t=this,e=this.$layer.load({message:"正在标记已读..."}),a={userID:this.userID,messageCode:""};for(var s in this.list.data)this.list.data[s].active&&(a.messageCode+=""===a.messageCode?this.list.data[s].messageCode:","+this.list.data[s].messageCode);h["a"].request("/message/readMessage",a).then((function(a){t.$layer.close(e),t.$layer.msg("操作成功",{type:"success"}),t.getList()})).catch((function(e){t.$layer.msg(e.errorMsg,{type:"error"})}))}},{key:"easyOperateCancel",value:function(){}},{key:"skip",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e&&(this.item=e);var a="";switch(t){case"detail":a="/message/detail/"+e.messageCode+"/message";break}this.$router.push({path:a})}}]),a}(d["d"]);p=Object(u["a"])([Object(d["a"])({filters:Object(l["a"])({},f["a"])})],p);var y=p,m=y,v=m,g=(a("3fde"),a("2877")),k=Object(g["a"])(v,s,i,!1,null,"68a5aebe",null);e["default"]=k.exports},"30a2":function(t,e,a){"use strict";a("b1f0"),a("fb24");function s(t){switch(t){case"customer":return"客户";case"admin":return"管理员"}}function i(t){var e=t;if(t)switch(t.toString()){case"1":e="云主机";break;case"2":e="云磁盘";break;case"3":e="云IP";break;case"4":e="云快照";break;case"5":e="账号管理";break;case"6":e="财务管理";break;case"7":e="NAT网关";break;case"8":e="VPC路由";break;case"9":e="VPC虚拟私有云";break;case"10":e="虚拟交换机";break;case"11":e="独立带宽包";break;case"12":e="共享带宽包";break;case"13":e="VPC带宽";break;case"14":e="镜像";break;case"15":e="安全组";break;case"16":e="负载均衡";break;case"17":e="RDS云数据库";break;case"18":e="弹性网卡";break;case"19":e="平台管理";break;case"20":e="客户管理";break;case"21":e="市场活动";break;case"22":e="合同业务";break;case"":e="全部";break}return e}function l(t){var e={destroy:"销毁提醒",expire:"到期提醒",opt:"操作提醒",balanceLess:"财务消息",security:"安全消息"};return e[t]}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label",a={MESSAGE_CONFIG_DESTROY:{label:"销毁提醒",id:"destroy"},MESSAGE_CONFIG_EXPIRE:{label:"到期提醒",id:"expire"},MESSAGE_CONFIG_BALANCE_LESS:{label:"余额不足",id:"balanceLess"},MESSAGE_CONFIG_MONEY:{label:"余额预警",id:"money"},MESSAGE_CONFIG_RDS_STORAGE:{label:"RDS存储容量提醒",id:"rdsStorage"}};return a[t][e]}function n(t,e){var a;switch(e){case"set":a=t?t.length>12?t.substr(0,5)+"***"+t.substr(t.length-6,6):t.length>5?t.substr(0,2)+"***"+t.substr(t.length-3,3):t.length>3?t.substr(0,1)+"***"+t.substr(t.length-1,1):t.substr(0,1)+"***":"-";break;case"name":a=t?t.length>2?t.substr(0,1)+"*"+t.substr(t.length-1,1):t.substr(0,1)+"*":"-";break;default:a="admin"===t?t:t?t.length>5?t.substr(0,2)+"***"+t.substr(t.length-3,3):t.length>3?t.substr(0,1)+"***"+t.substr(t.length-1,1):t.substr(0,1)+"***":"-";break}return a}e["a"]={userType:s,optLogType:i,messageType:l,messageSetType:r,desensitization:n}},"3fde":function(t,e,a){"use strict";a("e033")},e033:function(t,e,a){}}]);