(window["webpackJsonp_user"]=window["webpackJsonp_user"]||[]).push([["chunk-ae5f0d46"],{"18b1":function(t,e,a){},"18b4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-container"},[a("page-header",{attrs:{title:"角色列表",titleIcon:"icon-lock"}}),a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-box"},[a("div",{staticClass:"list-serach"},[a("div",{staticClass:"list-serach-left"},[t.$authority.ERole.create?a("efly-button",{staticClass:"btn-primary",attrs:{size:"small"},on:{click:function(e){return t.skip("create")}}},[a("i",{staticClass:"icon icon-create"}),t._v(" 新增角色 ")]):t._e(),a("efly-tooltip",{attrs:{content:"刷新",top:"-42px",left:"-6px",placement:"top",type:"white"}},[a("efly-button",{staticClass:"efly-button-icon btn-outline-primary mar-l-xs",attrs:{size:"small"},on:{click:function(e){return t.getList()}}},[a("i",{staticClass:"icon icon-refresh font-default"})])],1)],1)]),a("div",{staticClass:"list-data"},[a("efly-table",{attrs:{data:t.list.data,status:t.status.data,loadingImg:t.$loadingImg,nodataIcon:"icon-nodata"}},[a("efly-table-column",{attrs:{prop:"name",header:"权限类型",width:"100"}}),a("efly-table-column",{attrs:{prop:"remark",header:"备注",width:"300"}}),a("efly-table-column",{attrs:{show:t.$authority.ERole.modify||t.$authority.ERole.set||t.$authority.ERole.destroy,header:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"box flex-center"},[t.$authority.ERole.modify?a("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(a){return t.operateSelect("modify",e.data)}}},[t._v("修改 ")]):t._e(),t.$authority.ERole.set?a("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(a){return t.operateSelect("setDataPermissions",e.data)}}},[t._v("设置数据权限 ")]):t._e(),t.$authority.ERole.destroy?a("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(a){return t.operateSelect("delete",e.data)}}},[t._v("删除 ")]):t._e()],1)}}])})],1)],1)])]),a("easy-operate",{attrs:{show:t.component.easyOperate,prop:t.easyOperate.id,data:t.easyOperate.data,icon:t.easyOperate.icon,title:t.easyOperate.title},on:{confirm:function(e){return t.easyOperateConfirm(e)}}}),a("role-set-data-permissions",{attrs:{show:t.component.setDataPermissions,role:t.role},on:{success:function(e){return t.getList()}}})],1)},i=[],o=a("d4ec"),r=a("bee2"),n=a("262e"),l=a("2caf"),c=(a("b0c0"),a("9ab4")),u=a("1b40"),p=a("65a1"),y=a("bd30"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"popup-container layer-display",attrs:{id:"role-set-data-permissions"}},[a("efly-tip",{staticClass:"popup-item",attrs:{icon:"icon-cycel-exclamation",type:"primary"}},[a("span",[t._v("修改数据权限后，需重新登录之后才生效。")])]),a("div",{staticClass:"popup-item"},[a("div",{staticClass:"popup-item-label"},[t._v("数据权限：")]),a("div",{staticClass:"popup-item-content box line-height-34"},[a("efly-radio",{staticClass:"box flex-center",attrs:{active:"all"===t.permission},on:{click:function(e){return t.selectOption("all","permission")}}},[a("span",[t._v("全部数据")]),a("efly-tooltip",{staticClass:"permission-help",attrs:{placement:"top",content:"不包含告警管理模块的数据",top:"-36px",align:"center"}},[a("i",{staticClass:"icon color-primary icon-help"})])],1),a("efly-radio",{staticClass:"box flex-center",attrs:{active:"department"===t.permission},on:{click:function(e){return t.selectOption("department","permission")}}},[a("span",[t._v("部门数据")]),a("efly-tooltip",{staticClass:"permission-help",attrs:{placement:"top",content:"不包含告警管理模块的数据",top:"-36px",align:"center"}},[a("i",{staticClass:"icon color-primary icon-help"})])],1),a("efly-radio",{staticClass:"box flex-center",attrs:{active:"self"===t.permission},on:{click:function(e){return t.selectOption("self","permission")}}},[t._v("本人数据 ")])],1)])],1):t._e()},f=[],h=function(t){Object(n["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.permission="self",t}return Object(r["a"])(a,[{key:"created",value:function(){this.userID=y["a"].getUserID()}},{key:"getShow",value:function(t){var e=this;this.show=t,!0===t&&(this.init(),this.layerIndex=this.$layer.open({title:"修改数据权限",id:"role-set-data-permissions",icon:"",area:{width:"550px"},btn:{confirm:"确定",cancel:"取消"},confirm:function(){e.submit()},cancel:function(){e.layerClose()}}))}},{key:"init",value:function(){this.permission=this.role.managerAuthority}},{key:"selectOption",value:function(t,e){this[e]=t}},{key:"submit",value:function(){var t=this,e=this.$layer.load({message:"修改数据权限中..."}),a={roleID:this.role.id,managerAuthority:this.permission,userID:this.userID};p["a"].request("/user/privilege/setRoleDataAuthority",a).then((function(a){t.$layer.close(e),t.layerClose(),t.$layer.msg("修改成功",{type:"success"}),t.$emit("success")})).catch((function(a){t.$layer.close(e),t.$layer.msg(a.errorMsg,{type:"error"})}))}},{key:"layerClose",value:function(){this.$layer.close(this.layerIndex);var t=this.$parent;t.component.setDataPermissions=!1}}]),a}(u["d"]);Object(c["a"])([Object(u["c"])({default:function(){return!1}})],h.prototype,"show",void 0),Object(c["a"])([Object(u["c"])({default:function(){return""}})],h.prototype,"role",void 0),Object(c["a"])([Object(u["e"])("show",{immediate:!0})],h.prototype,"getShow",null),h=Object(c["a"])([u["a"]],h);var m=h,b=m,v=b,O=(a("9e45"),a("2877")),g=Object(O["a"])(v,d,f,!1,null,"28f4cb9a",null),k=g.exports,C=function(t){Object(n["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.list={accountStatus:["全部","已启用","已禁用"],data:[]},t.component={easyOperate:!1,setDataPermissions:!1},t.status={data:"loading"},t.page={total:0,start:0,length:10},t.easyOperate={data:[],icon:"",title:""},t.userID="",t.role="",t}return Object(r["a"])(a,[{key:"created",value:function(){this.userID=y["a"].getUserID(),this.getList()}},{key:"getList",value:function(){var t=this;this.status.data="loading";var e={userID:this.userID};p["a"].request("/user/privilege/queryRoleByMultipleParam",e).then((function(e){t.list.data=e.data.list,t.status.data=0===e.data.count?"nodata":"havedata",t.page.total=e.data.count,console.log(t.list.data)})).catch((function(e){t.status.data="error"}))}},{key:"operateSelect",value:function(t,e){switch(e&&(this.role=e),t){case"delete":this.easyOperateOpen(t);break;case"modify":this.skip(t);break;case"setDataPermissions":this.component[t]=!0;break}}},{key:"easyOperateOpen",value:function(t){switch(this.easyOperate.id=t,t){case"delete":this.easyOperate.title="删除权限类型",this.easyOperate.icon="icon-destory",this.easyOperate.data=[{type:"info",label:"删除权限类型",value:this.role.name}];break}this.component.easyOperate=!0}},{key:"easyOperateConfirm",value:function(t){switch(t){case"delete":this.delete();break}}},{key:"delete",value:function(){var t=this,e=this.$layer.load({message:"删除角色中..."}),a={id:this.role.id,userID:this.userID};p["a"].request("/user/privilege/deleteRole",a).then((function(a){t.$layer.close(e),t.$layer.msg("删除成功",{type:"success"}),t.getList()})).catch((function(a){t.$layer.close(e),t.$layer.msg(a.errorMsg,{type:"error"})}))}},{key:"skip",value:function(t){var e="";switch(t){case"create":e="/user/role/create";break;case"modify":e="/user/role/modify/"+this.role.id;break}this.$router.push({path:e,query:{}})}}]),a}(u["d"]);C=Object(c["a"])([Object(u["a"])({components:{RoleSetDataPermissions:k}})],C);var $=C,w=$,x=w,_=Object(O["a"])(x,s,i,!1,null,"89ce7330",null);e["default"]=_.exports},"9e45":function(t,e,a){"use strict";a("18b1")},b0c0:function(t,e,a){var s=a("83ab"),i=a("5e77").EXISTS,o=a("e330"),r=a("9bf2").f,n=Function.prototype,l=o(n.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(c.exec),p="name";s&&!i&&r(n,p,{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(t){return""}}})}}]);