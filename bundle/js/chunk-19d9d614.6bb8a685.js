(window["webpackJsonp_user"]=window["webpackJsonp_user"]||[]).push([["chunk-19d9d614"],{"04bc":function(t,e,s){"use strict";s("37de")},"37de":function(t,e,s){},"5d95":function(t,e,s){"use strict";s("ad60")},"84dc":function(t,e,s){"use strict";s("410a"),s("0814"),s("33fd"),s("6f78"),s("e3df"),s("fe82"),s("fd3a");function i(t){var e=/^\d{4,6}$/;return e.test(t)}function a(t){var e=/^[a-zA-Z0-9]{4}/;return e.test(t)&&4===t.length}function n(t){var e=/^\+?[1-9]\d*$/;return e.test(t)}function o(t){return-1!=t.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)}function r(t){var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/;return e.test(t)}function c(t){if(!t)return!1;var e=t.split("/");if(!r(e[0])||2!==e.length)return!1;var s=/^(0|[1-9][0-9]{0,1})$/;if(2===e.length&&!s.test(e[1])||2===e.length&&e[1]<0||2===e.length&&e[1]>32)return!1;if(2===e.length)for(var i=e[0].split("."),a=0;a<i.length;a++)if(!l(i[a],a+1,e[1]))return!1;return!0}function l(t,e,s){var i=Math.floor(s/8),a=s%8,n=/^[0-9]*$/;if(!n.test(t)||t<0||t>255)return!1;if(t=Number(t),i>=e)return!0;var o=Math.pow(2,8-a);return t%o===0}function u(t){var e=/^[a-zA-Z0-9\u4E00-\u9FA5\(\)\（\）\s]+$/;return e.test(t)}function d(t){return p(t)||h(t)}function p(t){if(""!=t){var e=t.split("-"),s=[3,7,9,10,5,8,4,2],i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=/^([0-9A-Z]){8}-[0-9|X]$/;if(!a.test(t))return!1;for(var n=0,o=0;o<8;o++)n+=i.indexOf(e[0].charAt(o))*s[o];var r=11-n%11+"",c=e[1]+"";return"11"==r?r="0":"10"==r?r="X":r+="",c==r}}function h(t){var e=/^(11|12|13|19|51|52|53|59|91|92|93|Y1)\d{6}[0-9A-Z]{10}$/;if(18!==t.length||!e.test(t))return!1;var s=t.substring(8,16)+"-"+t.substring(16,17);if(!p(s))return!1;for(var i=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28],a="0123456789ABCDEFGHJKLMNPQRTUWXY",n=0,o=0;o<17;o++)n+=a.indexOf(t.charAt(o))*i[o];var r=31-n%31;31===r&&(r=0);var c=a.substring(r,r+1),l=t.substring(17,18);return l===c}function f(t){var e=/^[1-9][0-9]{5}$/;return e.test(t)}function v(t){var e=/^[0-9]*$/,s=t?t.replace(/\s+/g,""):t;return!!s&&!e.test(s)}function y(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)}function m(t){var e=/^[a-zA-Z0-9]{5,17}$/;return e.test(t)}function b(t){var e=/^0?1[3|4|5|6|7|8|9][0-9]\d{8}$/;return e.test(t)}function g(t){var e=/(?!^([0-9]+|[a-zA-Z]+|[()`~!@#$%^&*\\-_+=|{}\[\]:;'<>,.?\/]+)$)^[\w()`~!@#$%^&*\\-_+=|{}\[\]:;'<>,.?\/]{8,32}$/g;return e.test(t)}function k(t){var e=/^(?!^([0-9]+|[a-zA-Z]+|[!@#$%^&*()_+-=]+)$)(?![a-zA-Z0-9]+$)(?![a-z0-9!@#$%^&*()_+-=]+$)(?![A-Z0-9!@#$%^&*()_+-=]+$)[a-zA-Z0-9!@#$%^&*()_+-=]{8,32}$/g;return e.test(t)}function x(t){var e=/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/;return e.test(t)}function C(t,e){return JSON.stringify(t)===JSON.stringify(e)}function _(t){var e=/^[0-9]*$/;return!(!e.test(t)||t<=0||t>100)}function $(t){var e=/^[0-9]*$/;return!(!e.test(t)||t<1||t>65535)}e["a"]={captcha:i,imageCode:a,positiveInteger:n,email:o,ip:r,companyName:u,institutionCode:d,postalCode:f,address:v,name:y,passport:m,phone:b,password:g,fourPassword:k,objEqual:C,checkNetwork:c,checkNetByByte:l,money:x,weight:_,port:$}},ad60:function(t,e,s){},d705:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-container"},[s("page-header",{attrs:{title:"独立折扣",titleIcon:"icon-lock"}}),s("div",{staticClass:"list-content"},[s("div",{staticClass:"list-box"},[s("div",{staticClass:"mar-b-default box flex-justify-between"},[s("div",{staticClass:"list-search-left"}),s("div",{staticClass:"list-search-right"},[s("div",{staticClass:"box"},[t._m(0),s("select-user",{attrs:{value:t.nameLike},on:{userChange:function(e){return t.userChange(e)}}})],1)])]),s("div",{staticClass:"list-serach"},[s("div",{staticClass:"list-serach-left"},[t.$authority.EDiscount.create?s("efly-button",{staticClass:"btn-primary",attrs:{size:"small"},on:{click:function(e){return t.operateSelect("createDiscount")}}},[s("i",{staticClass:"icon icon-create"}),t._v(" 添加折扣 ")]):t._e(),s("efly-tooltip",{attrs:{content:"刷新",top:"-42px",left:"-6px",placement:"top",type:"white"}},[s("efly-button",{staticClass:"efly-button-icon btn-outline-primary mar-l-xs",attrs:{size:"small"},on:{click:function(e){return t.getList()}}},[s("i",{staticClass:"icon icon-refresh font-default"})])],1)],1),s("div",{staticClass:"list-search-right"},[s("efly-button",{staticClass:"btn-primary mar-l-xs",attrs:{size:"small"},on:{click:function(e){return t.getList()}}},[t._v("搜索 ")]),s("efly-button",{staticClass:"btn-solid-primary mar-l-xs",attrs:{size:"small"},on:{click:t.clearScreen}},[t._v("清除 ")])],1)]),s("div",{staticClass:"list-data"},[s("efly-table",{attrs:{data:t.list.data,status:t.status.data,loadingImg:t.$loadingImg,nodataIcon:"icon-nodata"}},[s("efly-table-column",{attrs:{prop:"email",header:"客户账号（客户名）",width:"300"}}),s("efly-table-column",{attrs:{header:"子节点名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e.location))])})),0)}}])}),s("efly-table-column",{attrs:{prop:"remark",header:"主机折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["通用型"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"磁盘/镜像折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["disk"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"IP折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["ip"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"带宽折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["bandWidth"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"NAT折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["nat"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"SLB折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["slb"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"快照折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center flex-column"},t._l(e.data.houseList,(function(e,i){return s("span",[t._v(t._s(e["snap"]))])})),0)}}])}),s("efly-table-column",{attrs:{header:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"box flex-center"},[t.$authority.EDiscount.add?s("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(s){return t.operateSelect("add",e.data)}}},[t._v("添加折扣 ")]):t._e(),t.$authority.EDiscount.modify?s("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(s){return t.operateSelect("modify",e.data)}}},[t._v("修改折扣 ")]):t._e(),t.$authority.EDiscount.delete?s("efly-button",{staticClass:"efly-button-auto",attrs:{size:"small"},on:{click:function(s){return t.operateSelect("delete",e.data)}}},[t._v("删除 ")]):t._e()],1)}}])})],1)],1)])]),s("user-create-discount",{attrs:{show:t.component.createDiscount,type:t.status.createDiscount,data:t.discount},on:{success:function(e){return t.getList()}}}),s("delete-discount",{attrs:{show:t.component.deleteDiscount,data:t.discount},on:{success:function(e){return t.getList()}}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"line-height-34 mar-r-default text-color-secondary"},[s("i",{staticClass:"icon icon-log"}),t._v(" 客户账号")])}],n=s("d4ec"),o=s("bee2"),r=s("262e"),c=s("2caf"),l=s("9ab4"),u=s("1b40"),d=s("65a1"),p=s("bd30"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup-container layer-display",attrs:{id:"user-create-discount"}},[s("efly-tip",{staticClass:"popup-item",attrs:{icon:"icon-cycel-exclamation",type:"primary"}},[s("span",[t._v("请输入大于等于0的数值，最多保留两位小数，如 0.7 为七折")])]),"create"===t.type?s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("客户账号：")]),"create"===t.type?s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.user,trigger:t.errorMsg.user?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-item-content"},[s("select-user",{on:{userChange:function(e){return t.userChange(e)}}})],1)]):t._e()],1):t._e(),"modify"===t.type||"add"===t.type?s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("客户：")]),s("div",{staticClass:"popup-item-content text-secondary"},[t._v(" "+t._s(t.data.email)+" ")])]):t._e(),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("节点选择：")]),s("div",{staticClass:"popup-item-content box flex-align-center"},[s("efly-button-group",t._l(t.list.zone,(function(e,i){return s("efly-button",{class:{"btn-primary":t.zone.region===e.region},attrs:{size:"small"},on:{click:function(s){return t.selectOption(e,"zone")}}},[t._v(t._s(e.region)+" ")])})),1)],1)]),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("子节点选择 "+t._s("modify"===t.type?"":"（多选）")+"：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.area,trigger:t.errorMsg.area?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-item-content box flex-align-center"},[s("efly-button-group",t._l(t.list.area,(function(e,i){return s("efly-button",{class:{"btn-primary":e.active},attrs:{size:"small"},on:{click:function(s){return t.selectOption(e,"area")}}},[t._v(t._s(e.node)+" ")])})),1)],1)])],1),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("主机折扣率：")]),s("div",{staticClass:"popup-item-content popup-info"},[s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("通用型：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.general,trigger:t.errorMsg.general?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("general")}},model:{value:t.discount.general,callback:function(e){t.$set(t.discount,"general",e)},expression:"discount.general"}})],1)])],1)])]),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("资源折扣率：")]),s("div",{staticClass:"popup-item-content popup-info"},[s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("磁盘/镜像折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.disk,trigger:t.errorMsg.disk?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("disk")}},model:{value:t.discount.disk,callback:function(e){t.$set(t.discount,"disk",e)},expression:"discount.disk"}})],1)])],1),s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("IP折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.ip,trigger:t.errorMsg.ip?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("ip")}},model:{value:t.discount.ip,callback:function(e){t.$set(t.discount,"ip",e)},expression:"discount.ip"}})],1)])],1),s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("带宽折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.bandwidth,trigger:t.errorMsg.bandwidth?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("bandwidth")}},model:{value:t.discount.bandwidth,callback:function(e){t.$set(t.discount,"bandwidth",e)},expression:"discount.bandwidth"}})],1)])],1),s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("NAT折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.nat,trigger:t.errorMsg.nat?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("nat")}},model:{value:t.discount.nat,callback:function(e){t.$set(t.discount,"nat",e)},expression:"discount.nat"}})],1)])],1),s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("SLB折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.slb,trigger:t.errorMsg.slb?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("slb")}},model:{value:t.discount.slb,callback:function(e){t.$set(t.discount,"slb",e)},expression:"discount.slb"}})],1)])],1),s("div",{staticClass:"popup-info-item"},[s("div",{staticClass:"popup-info-item-label"},[t._v("快照折扣率：")]),s("efly-tooltip",{staticClass:"flex box flex-column",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.snap,trigger:t.errorMsg.snap?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-info-item-value"},[s("efly-input",{attrs:{size:"small",type:"number"},on:{change:function(e){return t.checkDiscount("snap")}},model:{value:t.discount.snap,callback:function(e){t.$set(t.discount,"snap",e)},expression:"discount.snap"}})],1)])],1)])])],1)},f=[],v=(s("b680"),s("e9c4"),s("84dc")),y=function(t){Object(r["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.area="",t.user="",t.discount={calculate:"1.00",general:"1.00",highFrequencyCalculate:"1.00",GPUVirtual:"1.00",disk:"1.00",ip:"1.00",bandwidth:"1.00",nat:"1.00",slb:"1.00",snap:"1.00"},t.errorMsg={user:"",area:"",calculate:"",general:"",highFrequencyCalculate:"",disk:"",ip:"",bandwidth:"",nat:"",slb:"",snap:""},t.list={zone:[],area:[]},t.status={node:"loading"},t}return Object(o["a"])(s,[{key:"mounted",value:function(){this.userID=p["a"].getUserID()}},{key:"getType",value:function(t){}},{key:"getData",value:function(t){}},{key:"getShow",value:function(t){var e=this;!0===t&&(this.init(),this.layerIndex=this.$layer.open({title:"create"===this.type?"创建折扣":"修改折扣",id:"user-create-discount",icon:"icon-editor",area:{width:"1100px"},btn:{confirm:"确定",cancel:"取消"},confirm:function(){e.submit()},cancel:function(){e.layerClose()}}))}},{key:"init",value:function(){"create"===this.type&&"add"===this.type&&(this.user="",this.area="",this.discount={calculate:"1.00",general:"1.00",highFrequencyCalculate:"1.00",GPUVirtual:"1.00",disk:"1.00",ip:"1.00",bandwidth:"1.00",nat:"1.00",slb:"1.00",snap:"1.00"}),this.errorMsg={user:"",area:"",calculate:"",general:"",highFrequencyCalculate:"",GPUVirtual:"",disk:"",ip:"",bandwidth:"",nat:"",slb:"",snap:""},this.getHouseList()}},{key:"getHouseList",value:function(){var t=this;this.status.node="loading";var e={resourceType:"vm",userID:this.userID};d["a"].request("/resource/house/query",e).then((function(e){if("create"===t.type||"add"===t.type){t.list.zone=p["a"].initializeNode(e.data);var s=[];for(var i in t.list.zone)for(var a in t.list.zone[i].vpc)s.push(t.list.zone[i].vpc[a]);if(t.list.zone.unshift({region:"全部",vpc:s}),t.zone=t.list.zone[0],"全部"===t.zone.region)for(var n in t.list.area=t.zone["vpc"],t.list.area.unshift({node:"全部"}),t.list.area)t.list.area[n].active=!1}else{var o=[];for(var r in e.data)for(var c in t.data.houseList)t.data.houseList[c].location===e.data[r].StockHouseName&&o.push(e.data[r]);t.list.zone=p["a"].initializeNode(o);var l=[];for(var u in t.list.zone)for(var d in t.list.zone[u].vpc)l.push(t.list.zone[u].vpc[d]);for(var h in t.list.zone.unshift({region:"全部",vpc:l}),t.zone=t.list.zone[0],t.list.area=t.zone["vpc"],t.list.area.unshift({node:"全部"}),t.list.area)t.list.area[h].active=!1;t.list.area[0].active=!0,t.getDiscount()}t.$forceUpdate()})).catch((function(e){t.status.node="error"}))}},{key:"userChange",value:function(t){this.user=t,this.errorMsg.user=""}},{key:"selectOption",value:function(t,e){switch(e){case"zone":for(var s in this[e]=t,this.list.area=this.zone["vpc"],this.area=this.list.area[0],this.list.area)this.list.area[s].active=!1;"modify"===this.type&&(this.list.area[0].active=!0),this.getDiscount();break;case"area":if("create"===this.type||"add"===this.type)t.active=!t.active;else{for(var i in this.list.area)this.list.area[i].active=!1;t.active=!0,this.getDiscount()}this.checkArea();break}this.$forceUpdate()}},{key:"getDiscount",value:function(){for(var t in this.list.area)for(var e in this.data.houseList)this.list.area[t].active&&this.list.area[t].node===this.data.houseList[e].location&&(this.discount.general=this.data.houseList[e]["通用型"].toFixed(2),this.discount.disk=this.data.houseList[e]["disk"].toFixed(2),this.discount.ip=this.data.houseList[e]["ip"].toFixed(2),this.discount.bandwidth=this.data.houseList[e]["bandWidth"].toFixed(2),this.discount.nat=this.data.houseList[e]["nat"].toFixed(2),this.discount.slb=this.data.houseList[e]["slb"].toFixed(2),this.discount.snap=this.data.houseList[e]["snap"].toFixed(2))}},{key:"checkUser",value:function(){return"create"===this.type&&""===this.user?(this.errorMsg.user="请选择客户。",!1):(this.errorMsg.user="",!0)}},{key:"checkArea",value:function(){for(var t in this.area="",this.list.area)this.list.area[t].active&&(this.area+=""===this.area?this.list.area[t].node:","+this.list.area[t].node);return""===this.area?(this.errorMsg.area="请选择子节点。",!1):(this.errorMsg.area="",!0)}},{key:"checkDiscount",value:function(t){return""===this.discount[t]?(this.errorMsg[t]="请输入折扣。",!1):v["a"].money(this.discount[t])?(this.errorMsg[t]="",!0):(this.errorMsg[t]="请输入正整数且最多两位小数。",!1)}},{key:"checkBtnStatus",value:function(){var t=this.checkUser();return t=this.checkArea()&&t,t=this.checkDiscount("calculate")&&t,t=this.checkDiscount("general")&&t,t=this.checkDiscount("highFrequencyCalculate")&&t,t=this.checkDiscount("GPUVirtual")&&t,t=this.checkDiscount("disk")&&t,t=this.checkDiscount("ip")&&t,t=this.checkDiscount("bandwidth")&&t,t=this.checkDiscount("nat")&&t,t=this.checkDiscount("slb")&&t,t=this.checkDiscount("snap")&&t,t}},{key:"submit",value:function(){if(!this.checkBtnStatus())return!1;"create"===this.type?this.create():"add"===this.type?this.add():this.modify()}},{key:"create",value:function(){var t=this,e=this.$layer.load({message:"添加折扣中..."}),s={userID:this.user.userID,location:this.area,disk:this.discount.disk,ip:this.discount.ip,bandWidth:this.discount.bandwidth,nat:this.discount.nat,bandWidthPackage:1,slb:this.discount.slb,snap:this.discount.snap,rds:1,computerSpecsJson:""},i={"通用型":this.discount.general};s.computerSpecsJson=JSON.stringify(i),d["a"].request("/user/discount/initDiscount",s).then((function(s){t.$layer.close(e),t.layerClose(),t.$layer.msg("添加成功",{type:"success"}),t.$emit("success")})).catch((function(s){t.$layer.close(e),t.$layer.msg(s.errorMsg,{type:"error"})}))}},{key:"add",value:function(){var t=this,e=this.$layer.load({message:"添加折扣中..."}),s={userID:this.data.userID,location:this.area,disk:this.discount.disk,ip:this.discount.ip,bandWidth:this.discount.bandwidth,nat:this.discount.nat,bandWidthPackage:1,slb:this.discount.slb,snap:this.discount.snap,rds:1,computerSpecsJson:""},i={"通用型":this.discount.general};s.computerSpecsJson=JSON.stringify(i),d["a"].request("/user/discount/initDiscount",s).then((function(s){t.$layer.close(e),t.layerClose(),t.$layer.msg("添加成功",{type:"success"}),t.$emit("success")})).catch((function(s){t.$layer.close(e),t.$layer.msg(s.errorMsg,{type:"error"})}))}},{key:"modify",value:function(){var t=this,e=this.$layer.load({message:"修改折扣中..."}),s={userID:this.data.userID,location:this.area,disk:this.discount.disk,ip:this.discount.ip,bandWidth:this.discount.bandwidth,nat:this.discount.nat,bandWidthPackage:1,slb:this.discount.slb,snap:this.discount.snap,rds:1,computerSpecsJson:""},i={"通用型":this.discount.general};s.computerSpecsJson=JSON.stringify(i),d["a"].request("/user/discount/updateDiscount",s).then((function(s){t.$layer.close(e),t.layerClose(),t.$layer.msg("修改成功",{type:"success"}),t.$emit("success")})).catch((function(s){t.$layer.close(e),t.$layer.msg(s.errorMsg,{type:"error"})}))}},{key:"layerClose",value:function(){this.$layer.close(this.layerIndex);var t=this.$parent;t.component.createDiscount=!1}}]),s}(u["d"]);Object(l["a"])([Object(u["c"])({default:function(){return!1}})],y.prototype,"show",void 0),Object(l["a"])([Object(u["c"])({default:function(){return"create"}})],y.prototype,"type",void 0),Object(l["a"])([Object(u["c"])({default:function(){return""}})],y.prototype,"data",void 0),Object(l["a"])([Object(u["e"])("type",{immediate:!0})],y.prototype,"getType",null),Object(l["a"])([Object(u["e"])("data",{immediate:!0})],y.prototype,"getData",null),Object(l["a"])([Object(u["e"])("show",{immediate:!0})],y.prototype,"getShow",null),y=Object(l["a"])([u["a"]],y);var m=y,b=m,g=b,k=(s("5d95"),s("2877")),x=Object(k["a"])(g,h,f,!1,null,"1f40defa",null),C=x.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup-container layer-display",attrs:{id:"delete-discount"}},[s("efly-tip",{staticClass:"popup-item",attrs:{icon:"icon-cycel-exclamation",type:"primary"}},[s("span",[t._v("即将删除该账号的折扣，是否确定？")])]),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("客户账号：")]),s("div",{staticClass:"popup-item-content text-secondary"},[t._v(" "+t._s(t.data.email)+" ")])]),s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[t._v("选择子节点：")]),s("efly-tooltip",{staticClass:"box flex-column flex",staticStyle:{width:"100%"},attrs:{content:t.errorMsg.location,trigger:t.errorMsg.location?"show":"hide",position:"relative",top:"2px",left:"-6px",type:"danger",placement:"bottom-left"}},[s("div",{staticClass:"popup-item-content"},[s("div",{staticClass:"option-box-container"},[s("div",{staticClass:"option-box-content"},t._l(t.data.houseList,(function(e,i){return s("div",{staticClass:"option-box-item"},[s("efly-checkbox",{attrs:{active:e.active},on:{click:function(e){return t.selectOption(i)}}},[s("div",{staticClass:"box flex-column"},[s("span",[t._v(t._s(e.location))])])])],1)})),0)])])])],1)],1)},$=[],w=function(t){Object(r["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.errorMsg={location:""},t.location="",t}return Object(o["a"])(s,[{key:"getData",value:function(t){}},{key:"getShow",value:function(t){var e=this;this.show=t,!0===t&&(this.init(),this.layerIndex=this.$layer.open({title:"删除折扣",id:"delete-discount",icon:"icon-destroy",area:{width:"550px"},btn:{confirm:"确定",cancel:"取消"},confirm:function(){e.submit()},cancel:function(){e.layerClose()}}))}},{key:"init",value:function(){for(var t in this.data.houseList)this.data.houseList[t].active=!1}},{key:"selectOption",value:function(t){this.data.houseList[t].active=!this.data.houseList[t].active,this.$forceUpdate(),this.checkLocation()}},{key:"checkLocation",value:function(){var t=!1;for(var e in this.location="",this.data.houseList)this.data.houseList[e].active&&(t=!0,this.location+=""===this.location?this.data.houseList[e].location:","+this.data.houseList[e].location);return t?(this.errorMsg.location="",!0):(this.errorMsg.location="请选择删除的节点。",!1)}},{key:"submit",value:function(){var t=this;if(this.checkLocation()){var e=this.$layer.load({message:"'删除用户折扣中...'"}),s={userID:this.data.userID,location:this.location};d["a"].request("/user/discount/deleteDiscount",s).then((function(s){t.$layer.close(e),t.layerClose(),t.$layer.msg("删除成功",{type:"success"}),t.$emit("success")})).catch((function(s){t.$layer.close(e),t.$layer.msg(s.errorMsg,{type:"error"})}))}}},{key:"layerClose",value:function(){this.$layer.close(this.layerIndex);var t=this.$parent;t.component.deleteDiscount=!1}}]),s}(u["d"]);Object(l["a"])([Object(u["c"])({default:function(){return!1}})],w.prototype,"show",void 0),Object(l["a"])([Object(u["c"])({default:function(){return!1}})],w.prototype,"data",void 0),Object(l["a"])([Object(u["e"])("data",{immediate:!0})],w.prototype,"getData",null),Object(l["a"])([Object(u["e"])("show",{immediate:!0})],w.prototype,"getShow",null),w=Object(l["a"])([u["a"]],w);var D=w,z=D,O=z,L=(s("04bc"),Object(k["a"])(O,_,$,!1,null,"fa0d6bc4",null)),S=L.exports,j=function(t){Object(r["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.userID="",t.discount="",t.nameLike="",t.list={data:[]},t.status={data:"loading",createDiscount:"create"},t.page={total:0,start:0,length:10},t.component={createDiscount:!1,deleteDiscount:!1},t}return Object(o["a"])(s,[{key:"created",value:function(){this.nameLike=this.$route.params.query?this.$route.params.query:"",this.userID=p["a"].getUserID(),this.getList()}},{key:"getList",value:function(){var t=this;this.status.data="loading";var e={limitStart:this.page.start,limitCount:this.page.length,accountName:this.nameLike};d["a"].request("/user/discount/queryUserDiscount",e).then((function(e){t.list.data=e.data.list,t.status.data=0===e.data.count?"nodata":"havedata",t.page.total=e.data.count})).catch((function(e){t.status.data="error"}))}},{key:"userChange",value:function(t){this.nameLike=t.email}},{key:"clearScreen",value:function(){this.nameLike="",this.getList()}},{key:"operateSelect",value:function(t,e){switch(e&&(this.discount=e),console.log(this.discount),t){case"createDiscount":this.status.createDiscount="create",this.component[t]=!0;break;case"add":this.status.createDiscount="add",this.component.createDiscount=!0;break;case"modify":this.status.createDiscount="modify",this.component.createDiscount=!0;break;case"delete":this.component.deleteDiscount=!0;break}}}]),s}(u["d"]);j=Object(l["a"])([Object(u["a"])({components:{UserCreateDiscount:C,DeleteDiscount:S}})],j);var M=j,I=M,A=I,N=Object(k["a"])(A,i,a,!1,null,"9b1c4192",null);e["default"]=N.exports}}]);