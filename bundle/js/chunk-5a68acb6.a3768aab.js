(window["webpackJsonp_user"]=window["webpackJsonp_user"]||[]).push([["chunk-5a68acb6"],{"2aa0":function(e,t,s){"use strict";s("d3b7"),s("159b");function a(e,t){return e.forEach((function(e,s){e.init={status:{selected:!1}},i(e,t)})),e}function i(e,t){var s={baseOperation:{label:"基本操作",icon:"icon-base-operate",show:!0,data:{freeze:{label:"冻结账号",icon:"",show:t.EUser.freeze,disabled:!1,error:""},unfreeze:{label:"解冻账号",icon:"",show:t.EUser.unfreeze,disabled:!1,error:""},logout:{label:"注销账号",icon:"",show:t.EUser.logout,disabled:!1,error:""},changeEmail:{label:"更换账号邮箱",icon:"",show:t.EUser.changeEmail,disabled:!1,error:""}}},accountMnagement:{label:"账号管理",icon:"icon-account-operate",show:!0,data:{accountInfo:{label:"账号信息",icon:"",show:t.EUser.accountInfo,disabled:!1,error:""},resetPassword:{label:"修改密码",icon:"",show:t.EUser.resetPassword,disabled:!1,error:""},clientLog:{label:"客户日志",icon:"",show:t.EClientLog.list,disabled:!1,error:""},setPermission:{label:"设置角色",icon:"",show:t.EUser.setPermission,disabled:!1,error:""},setDepartment:{label:"设置部门",icon:"",show:t.EUser.setDepartment,disabled:!1,error:""}}},resource:{label:"所属资源",icon:"icon-virtual-resource",show:!0,data:{vm:{label:"所属云主机",icon:"",show:t.EVm.list,disabled:!1,error:""},mirror:{label:"所属镜像",icon:"",show:t.EImage.list,disabled:!1,error:""},disk:{label:"所属磁盘",icon:"",show:t.EDisk.list,disabled:!1,error:""},snap:{label:"所属快照",icon:"",show:t.ESnap.fixedSnapList,disabled:!1,error:""},ip:{label:"所属IP",icon:"",show:t.EIp.list,disabled:!1,error:""},vpc:{label:"所属VPC",icon:"",show:t.EVpc.list,disabled:!1,error:""},vswitch:{label:"所属交换机",icon:"",show:t.EVswitch.list,disabled:!1,error:""},route:{label:"所属路由",icon:"",show:t.ERouteTable.list,disabled:!1,error:""},nat:{label:"所属nat网关",icon:"",show:t.ENat.list,disabled:!1,error:""},slb:{label:"所属负载均衡",icon:"",show:t.ESlb.list,disabled:!1,error:""}}},charges:{label:"资费操作",icon:"icon-caiwuguanli",show:!0,data:{addCashMoney:{label:"现金充值",icon:"",show:t.ECash.recharge,disabled:!1,error:""},addVoucher:{label:"添加代金券",icon:"",show:t.EVoucher.add,disabled:!1,error:""},recycleVoucher:{label:"回收代金券",icon:"",show:t.EVoucher.recycle,disabled:!1,error:""},dailyBills:{label:"每日账单",icon:"",show:t.EDailyBills.list,disabled:!1,error:""},chargesRecord:{label:"资费记录",icon:"",show:t.EChargesRecord.list,disabled:!1,error:""},cashRecords:{label:"现金记录",icon:"",show:t.ECash.list,disabled:!1,error:""},voucherRecords:{label:"代金券记录",icon:"",show:t.EVoucher.list,disabled:!1,error:""}}},other:{}};1===e.isFreeze?s.baseOperation.data.freeze.show=!1:s.baseOperation.data.unfreeze.show=!1,"customer"===e.userType&&(s.accountMnagement.data.setDepartment.show=!1,s.accountMnagement.data.setPermission.show=!1),s=r(s,e),s=o(s,e),e.init["operate"]=s}function r(e,t){var s=!1;for(var a in e){var i=!1;for(var r in e[a].data)e[a].data[r].show&&(i=!0);e[a].show=i,e[a].show&&(s=!0)}return t["init"].status.operate=s,e}function o(e,t){return"admin"===t.accountName&&(e.baseOperation.data.freeze=!1,e.baseOperation.data.unfreeze=!1,e.baseOperation.data.logout=!1,e.accountMnagement.data.setPermission=!1),e}t["a"]={init:a}},6644:function(e,t,s){"use strict";s("99b7")},"99b7":function(e,t,s){},a434:function(e,t,s){"use strict";var a=s("23e7"),i=s("da84"),r=s("23cb"),o=s("5926"),n=s("07fa"),l=s("7b0b"),c=s("65f0"),d=s("8418"),u=s("1dde"),b=u("splice"),h=i.TypeError,p=Math.max,f=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var s,a,i,u,b,w,g=l(this),y=n(g),x=r(e,y),E=arguments.length;if(0===E?s=a=0:1===E?(s=0,a=y-x):(s=E-2,a=f(p(o(t),0),y-x)),y+s-a>m)throw h(v);for(i=c(g,a),u=0;u<a;u++)b=x+u,b in g&&d(i,u,g[b]);if(i.length=a,s<a){for(u=x;u<y-a;u++)b=u+a,w=u+s,b in g?g[w]=g[b]:delete g[w];for(u=y;u>y-a+s;u--)delete g[u-1]}else if(s>a)for(u=y-a;u>x;u--)b=u+a-1,w=u+s-1,b in g?g[w]=g[b]:delete g[w];for(u=0;u<s;u++)g[u+x]=arguments[u+2];return g.length=y-a+s,i}})},ab53:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container text-color-regular"},[s("page-header",{attrs:{title:"添加/移除部门",titleIcon:"icon-groupnotice",isBack:!0}}),"havedata"===e.status.department?s("div",{staticClass:"create-container"},[s("div",{staticClass:"create-content popup-container flex-column"},[s("div",{staticClass:"popup-item"},[s("div",{staticClass:"popup-item-label"},[e._v("部门名称：")]),s("div",{staticClass:"popup-item-content text-secondary"},[e._v(" "+e._s(e.department.name)+" ")])]),s("efly-tip",{staticClass:"popup-item",attrs:{icon:"icon-cycel-exclamation",width:"100%",type:"primary"}},[e._v(" 一个管理员只能绑定一个部门，当选择已经绑定部门的管理员作为当前部门成员时，将解除另一个部门的绑定 ")]),s("div",{staticClass:"popup-item box"},[s("div",{staticClass:"border-t-base border-l-base border-b-base"},[s("div",{staticClass:"box  flex-align-center border-b-base pad-mini",staticStyle:{width:"100%","justify-content":"end"}},[s("efly-button",{staticClass:"btn-primary efly-button-icon mar-l-xs",attrs:{size:"small"},on:{click:function(t){return e.getUser("query")}}},[s("i",{staticClass:"icon icon-search"})])],1),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"pad-mini",staticStyle:{width:"180px",height:"250px"},attrs:{placeholder:"填写要搜索的用户名，点击放大镜图标，进行搜索",name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),s("div",{staticClass:"option-box-container",staticStyle:{width:"350px"}},[s("div",{staticClass:"option-box-content"},e._l(e.list.user,(function(t,a){return s("div",{staticClass:"option-box-item"},[s("efly-checkbox",{attrs:{active:t.init.status.selected},on:{click:function(t){return e.selectUser(a)}}},[s("div",{staticClass:"box flex-column"},[s("span",[e._v(e._s(t.trueName))])])])],1)})),0)]),s("div",{staticClass:"switch-btn",staticStyle:{padding:"120px 16px"}},[s("efly-button",{staticClass:"efly-button-icon efly-button-text mar-lr-xs",staticStyle:{cursor:"default",border:"1px solid  !important",width:"46px",color:"#009FEF",background:"#e8f6ff"},attrs:{size:"small"}},[s("i",{staticClass:"icon icon-exchange"})])],1),s("div",{staticClass:"option-box-container",staticStyle:{width:"350px"}},[s("div",{staticClass:"option-box-content"},e._l(e.list.selected,(function(t,a){return s("div",{staticClass:"option-box-item"},[s("efly-checkbox",{attrs:{active:!0},on:{click:function(t){return e.cancelUser(a)}}},[s("div",{staticClass:"box flex-column"},[s("span",[e._v(e._s(t.trueName))])])])],1)})),0)])])],1)]):e._e(),s("admin-footer",[s("div",{attrs:{slot:"left"},slot:"left"},[s("efly-button",{staticClass:"btn-primary mar-r-mini",attrs:{size:"small"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)])],1)},i=[],r=s("d4ec"),o=s("bee2"),n=s("262e"),l=s("2caf"),c=(s("b0c0"),s("a434"),s("9ab4")),d=s("1b40"),u=s("65a1"),b=s("2aa0"),h=s("bd30"),p=function(e){Object(n["a"])(s,e);var t=Object(l["a"])(s);function s(){var e;return Object(r["a"])(this,s),e=t.apply(this,arguments),e.list={user:[],selected:[]},e.status={department:"loading",user:"loading"},e.name="",e}return Object(o["a"])(s,[{key:"created",value:function(){this.getDepartment(),this.userID=h["a"].getUserID()}},{key:"getDepartment",value:function(){var e=this;this.status.department="loading";var t={id:this.$route.params.id};u["a"].request("/user/department/query",t).then((function(t){e.status.department="havedata",e.department=t.data.list[0],e.getUser()})).catch((function(t){e.status.data="error"}))}},{key:"getUser",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init";this.status.user="loading";var s={customerNameLike:this.name,userType:"admin"};u["a"].request("/user/query",s).then((function(s){if(e.list.user=b["a"].init(s.data.list,e.$authority),"init"===t)for(var a in e.list.user)e.list.user[a].departmentID===e.department.id&&(e.list.user[a].init.status.selected=!0,e.list.selected.push(e.list.user[a]));else for(var i in e.list.user)for(var r in e.list.selected)e.list.user[i].userID===e.list.selected[r].userID&&(e.list.user[i].init.status.selected=!0);e.status.user=0===s.data.count?"nodata":"havedata"})).catch((function(t){e.status.user="error"}))}},{key:"selectUser",value:function(e){if(this.list.user[e].init.status.selected=!this.list.user[e].init.status.selected,this.list.user[e].init.status.selected)this.list.selected.push(this.list.user[e]);else for(var t in this.list.selected)if(this.list.user[e].userID===this.list.selected[t].userID){this.list.selected.splice(t,1);break}}},{key:"cancelUser",value:function(e){for(var t in this.list.user)if(this.list.selected[e].userID===this.list.user[t].userID){this.list.user[t].init.status.selected=!1;break}this.list.selected.splice(e,1)}},{key:"submit",value:function(){var e=this,t=this.$layer.load({message:"修改成员中..."}),s={id:this.department.id,userID:this.userID,adminUserIDs:""};for(var a in this.list.selected)s.adminUserIDs+="0"===a?this.list.selected[a].userID:","+this.list.selected[a].userID;u["a"].request("/user/department/batchAttachDepartment",s).then((function(s){e.$layer.close(t),e.$layer.msg("修改成功",{type:"success"}),e.$router.back()})).catch((function(s){e.$layer.close(t),e.$layer.msg(s.errorMsg,{type:"error"})}))}}]),s}(d["d"]);p=Object(c["a"])([d["a"]],p);var f=p,m=f,v=m,w=(s("6644"),s("2877")),g=Object(w["a"])(v,a,i,!1,null,"16852d8d",null);t["default"]=g.exports},b0c0:function(e,t,s){var a=s("83ab"),i=s("5e77").EXISTS,r=s("e330"),o=s("9bf2").f,n=Function.prototype,l=r(n.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=r(c.exec),u="name";a&&!i&&o(n,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(e){return""}}})}}]);